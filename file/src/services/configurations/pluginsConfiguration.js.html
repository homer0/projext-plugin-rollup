<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/services/configurations/pluginsConfiguration.js | projext-plugin-rollup</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Allows projext to use Rollup as a build engine."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="projext-plugin-rollup"><meta property="twitter:description" content="Allows projext to use Rollup as a build engine."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/homer0/projext-plugin-rollup"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-useExpress">useExpress</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-useJimpex">useJimpex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MiddlewareGetDirectory">MiddlewareGetDirectory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MiddlewareGetFileSystem">MiddlewareGetFileSystem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MiddlewareInformation">MiddlewareInformation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupCSSPluginOptions">ProjextRollupCSSPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupCompressionPluginEntry">ProjextRollupCompressionPluginEntry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupCompressionPluginOptions">ProjextRollupCompressionPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupDevServerPluginEvent">ProjextRollupDevServerPluginEvent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupDevServerPluginOptions">ProjextRollupDevServerPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupNodeRunnerPluginEvent">ProjextRollupNodeRunnerPluginEvent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupNodeRunnerPluginOptions">ProjextRollupNodeRunnerPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupPluginURL">ProjextRollupPluginURL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupPluginsStats">ProjextRollupPluginsStats</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStatsPluginCellsWidth">ProjextRollupStatsPluginCellsWidth</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStatsPluginLog">ProjextRollupStatsPluginLog</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStatsPluginLogOptions">ProjextRollupStatsPluginLogOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStatsPluginOptions">ProjextRollupStatsPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStatsPluginReset">ProjextRollupStatsPluginReset</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStylesheetAssetsHelperPluginOptions">ProjextRollupStylesheetAssetsHelperPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStylesheetAssetsPluginOptions">ProjextRollupStylesheetAssetsPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupStylesheetModulesFixerPluginOptions">ProjextRollupStylesheetModulesFixerPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupTemplatePluginOptions">ProjextRollupTemplatePluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProjextRollupURLsPluginOptions">ProjextRollupURLsPluginOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Provider">Provider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ProviderRegisterMethod">ProviderRegisterMethod</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupConfigurationOutputParams">RollupConfigurationOutputParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupConfigurationPathsParams">RollupConfigurationPathsParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupConfigurations">RollupConfigurations</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupConfigurationsByEnvironment">RollupConfigurationsByEnvironment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupFileDefinition">RollupFileDefinition</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupFilter">RollupFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupPluginInfo">RollupPluginInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-RollupStylesheetProcessor">RollupStylesheetProcessor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-StringOrObject">StringOrObject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="ttps://homer0.github.io/projext/class/src/services/configurations/babelConfiguration.js~BabelConfiguration.html">BabelConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/class/src/services/building/buildVersion.js~BuildVersion.html">BuildVersion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/wootils/class/wootils/node/environmentUtils.js~EnvironmentUtils.html">EnvironmentUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/class/src/services/common/events.js~Events.html">Events</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://expressjs.com">Express</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://nodejs.org/api/fs.html">FileSystem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://nodejs.org/api/http.html#http_class_http_clientrequest">HTTPRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://nodejs.org/api/http.html#http_class_http_serverresponse">HTTPResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://yarnpkg.com/en/package/jimpex">Jimpex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://yarnpkg.com/en/package/jimple">Jimple</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/wootils/class/wootils/node/logger.js~Logger.html">Logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://expressjs.com/en/guide/using-middleware.html">Middleware</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/wootils/class/wootils/node/pathUtils.js~PathUtils.html">PathUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/class/src/app/index.js~Projext.html">Projext</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/typedef/index.html#static-typedef-Target">Target</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/typedef/index.html#static-typedef-TargetConfigurationCreator">TargetConfigurationCreator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/typedef/index.html#static-typedef-TargetFileRules">TargetFileRules</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/class/src/services/targets/targets.js~Targets.html">Targets</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="ttps://homer0.github.io/projext/class/src/services/targets/targetsFileRules/targetsFileRules.js~TargetsFileRules.html">TargetsFileRules</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://homer0.github.io/projext/class/src/services/targets/targetsHTML.js~TargetsHTML.html">TargetsHTML</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#abstracts">abstracts</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/abstracts/configurationFile.js~ConfigurationFile.html">ConfigurationFile</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#jimpex">jimpex</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/jimpex/frontendFs.js~RollupFrontendFs.html">RollupFrontendFs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/jimpex/sendFile.js~RollupSendFile.html">RollupSendFile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-rollupFrontendFs">rollupFrontendFs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupSendFile">rollupSendFile</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins">plugins</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/utils.js~ProjextRollupUtils.html">ProjextRollupUtils</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-compression">plugins/compression</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/compression/index.js~ProjextRollupCompressionPlugin.html">ProjextRollupCompressionPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-compression">compression</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-css">plugins/css</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/css/index.js~ProjextRollupCSSPlugin.html">ProjextRollupCSSPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-css">css</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-devserver">plugins/devServer</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/devServer/index.js~ProjextRollupDevServerPlugin.html">ProjextRollupDevServerPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-devServer">devServer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-noderunner">plugins/nodeRunner</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/nodeRunner/index.js~ProjextRollupNodeRunnerPlugin.html">ProjextRollupNodeRunnerPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nodeRunner">nodeRunner</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-stats">plugins/stats</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/stats/index.js~ProjextRollupStatsPlugin.html">ProjextRollupStatsPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stats">stats</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-stylesheetassets">plugins/stylesheetAssets</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/stylesheetAssets/helper.js~ProjextRollupStylesheetAssetsHelperPlugin.html">ProjextRollupStylesheetAssetsHelperPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/stylesheetAssets/index.js~ProjextRollupStylesheetAssetsPlugin.html">ProjextRollupStylesheetAssetsPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stylesheetAssetsHelper">stylesheetAssetsHelper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stylesheetAssets">stylesheetAssets</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-stylesheetmodulesfixer">plugins/stylesheetModulesFixer</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/stylesheetModulesFixer/index.js~ProjextRollupStylesheetModulesFixerPlugin.html">ProjextRollupStylesheetModulesFixerPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stylesheetModulesFixer">stylesheetModulesFixer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-template">plugins/template</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/template/index.js~ProjextRollupTemplatePlugin.html">ProjextRollupTemplatePlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-template">template</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-urls">plugins/urls</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/urls/index.js~ProjextRollupURLsPlugin.html">ProjextRollupURLsPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-urls">urls</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#plugins-windowasglobal">plugins/windowAsGlobal</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/plugins/windowAsGlobal/index.js~ProjextRollupWindowAsGlobalPlugin.html">ProjextRollupWindowAsGlobalPlugin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-windowAsGlobal">windowAsGlobal</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#services-building">services/building</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/building/configuration.js~RollupConfiguration.html">RollupConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/building/engine.js~RollupBuildEngine.html">RollupBuildEngine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupConfiguration">rollupConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupBuildEngine">rollupBuildEngine</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#services-configurations">services/configurations</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/configurations/browserDevelopmentConfiguration.js~RollupBrowserDevelopmentConfiguration.html">RollupBrowserDevelopmentConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/configurations/browserProductionConfiguration.js~RollupBrowserProductionConfiguration.html">RollupBrowserProductionConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/configurations/nodeDevelopmentConfiguration.js~RollupNodeDevelopmentConfiguration.html">RollupNodeDevelopmentConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/configurations/nodeProductionConfiguration.js~RollupNodeProductionConfiguration.html">RollupNodeProductionConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/configurations/pluginsConfiguration.js~RollupPluginSettingsConfiguration.html">RollupPluginSettingsConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupBrowserDevelopmentConfiguration">rollupBrowserDevelopmentConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupBrowserProductionConfiguration">rollupBrowserProductionConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupNodeDevelopmentConfiguration">rollupNodeDevelopmentConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupNodeProductionConfiguration">rollupNodeProductionConfiguration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupPluginSettingsConfiguration">rollupPluginSettingsConfiguration</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#services-server">services/server</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/services/server/middleware.js~RollupMiddleware.html">RollupMiddleware</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rollupMiddleware">rollupMiddleware</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/services/configurations/pluginsConfiguration.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">const fs = require(&apos;fs-extra&apos;);
const postcss = require(&apos;postcss&apos;);
const postcssModules = require(&apos;postcss-modules&apos;);
const builtinModules = require(&apos;builtin-modules&apos;);
const { provider } = require(&apos;jimple&apos;);
const ConfigurationFile = require(&apos;../../abstracts/configurationFile&apos;);
/**
 * This service creates a configuration with all the settings for the plugins this build engine
 * uses.
 * @extends {ConfigurationFile}
 */
class RollupPluginSettingsConfiguration extends ConfigurationFile {
  /**
   * @param {Logger}             appLogger          To send to the plugins that support a logger.
   * @param {BabelConfiguration} babelConfiguration To get the target Babel configuration.
   * @param {BabelHelper}        babelHelper        To disable the `modules` setting of the Babel
   *                                                env preset for a target, as Rollup requires.
   * @param {Events}             events             To reduce the settings.
   * @param {Object}             packageInfo        To get the dependencies and define them as
   *                                                externals for Node targets.
   * @param {PathUtils}          pathUtils          Require by `ConfigurationFile` in order to
   *                                                build the path to the overwrite file. It&apos;s
   *                                                also used to build the paths of SSL
   *                                                certificates the dev server plugin may use.
   * @param {Object}             rollupPluginInfo   To get the name of the _&quot;sub packages&quot;_ the
   *                                                plugin provides and that should be marked as
   *                                                external.
   * @param {TargetsHTML}        targetsHTML        To get the path to a target HTML template
   *                                                file.
   */
  constructor(
    appLogger,
    babelConfiguration,
    babelHelper,
    events,
    packageInfo,
    pathUtils,
    rollupPluginInfo,
    targetsHTML
  ) {
    super(pathUtils, &apos;rollup/plugins.config.js&apos;);
    /**
     * A local reference for the `appLogger` service.
     * @type {Logger}
     */
    this.appLogger = appLogger;
    /**
     * A local reference for the `babelConfiguration` service.
     * @type {BabelConfiguration}
     */
    this.babelConfiguration = babelConfiguration;
    /**
     * A local reference for the `babelHelper` service.
     * @type {BabelHelper}
     */
    this.babelHelper = babelHelper;
    /**
     * A local reference for the `events` service.
     * @type {Events}
     */
    this.events = events;
    /**
     * The project `package.json` information.
     * @type {Object}
     */
    this.packageInfo = packageInfo;
    /**
     * A local reference for the plugin information.
     * @type {RollupPluginInfo}
     */
    this.rollupPluginInfo = rollupPluginInfo;
    /**
     * A local reference for the `targetsHTML` service.
     * @type {TargetsHTML}
     */
    this.targetsHTML = targetsHTML;
  }
  /**
   * Creates the plugins settings for the required target.
   * This method uses the reducer events `rollup-plugin-settings-configuration-for-node` or
   * `rollup-plugin-settings-configuration-for-browser`, depending on the target type, and then
   * `rollup-plugin-settings-configuration`. The event receives the configuration object, the
   * `params` and it expects an updated configuration object on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @param {Function}                  stats  A function to send to the plugins that support
   *                                           logging stats entries.
   * @return {Object}
   */
  createConfig(params, stats) {
    // Get the external settings.
    const external = this._getExternalSettings(params);
    // Define the basic settings.
    const settings = {
      external,
      globals: this._getGlobalVariablesSettings(params, external.external),
      resolve: this._getResolveSettings(params, stats),
      replace: this._getReplaceSettings(params, stats),
      babel: this._getBabelSettings(params, stats),
      commonjs: this._getCommonJSSettings(params, stats),
      sass: this._getSASSSettings(params, stats),
      css: this._getCSSSettings(params, stats),
      stylesheetAssets: this._getStyleheetAssetsSettings(params, stats),
      stylesheetModulesFixer: this._getStylesheetModulesFixerSettings(params, stats),
      html: this._getHTMLSettings(params, stats),
      json: this._getJSONSettings(params, stats),
      urls: this._getURLsSettings(params, stats),
      watch: this._getWatchSettings(params, stats),
      uglify: this._getUglifySettings(params, stats),
      compression: this._getCompressionSettings(params, stats),
      statsLog: this._getStatsLogSettings(params),
    };

    let eventName;
    // Based on the target type, define the event reducer name and add specific settings.
    if (params.target.is.node) {
      eventName = &apos;rollup-plugin-settings-configuration-for-node&apos;;
      settings.nodeRunner = this._getNodeRunnerSettings(params);
      settings.stylesheetAssetsHelper = this._getStyleheetAssetsHelperSettings(params);
    } else {
      eventName = &apos;rollup-plugin-settings-configuration-for-browser&apos;;
      settings.template = this._getTemplateSettings(params, stats);
      settings.devServer = this._getDevServerSettings(params);
    }
    // Return the reduced settings.
    return this.events.reduce(
      [eventName, &apos;rollup-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the external dependencies.
   * This method uses the reducer event `rollup-external-plugin-settings-configuration-for-browser`
   * or `rollup-external-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-external-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getExternalSettings(params) {
    const { target, buildType } = params;
    // Define the list of modules that shuld be external.
    const external = [];

    // Push modules the target is excluding by configuration.
    if (target.excludeModules) {
      external.push(...target.excludeModules);
    }
    // If the target is for Node...
    if (target.is.node) {
      // Push all the Node builtin modules
      external.push(...builtinModules);
      // Push the plugin _&quot;sub modules&quot;_.
      external.push(...this.rollupPluginInfo.external.map((dependencyName) =&gt; (
        `${this.rollupPluginInfo.name}/${dependencyName}`
      )));
      // Push the production dependencies.
      external.push(...Object.keys(this.packageInfo.dependencies));
      // And if the build is for development, push the dev dependencies too.
      if (buildType === &apos;development&apos;) {
        external.push(...Object.keys(this.packageInfo.devDependencies));
      }
    }
    // Wrap the list on an object.
    const settings = { external };

    const eventName = target.is.node ?
      &apos;rollup-external-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-external-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-external-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the global variables on the bundle. They are actually based on the
   * modules that are handled as external.
   * This method uses the reducer event
   * `rollup-global-variables-plugin-settings-configuration-for-browser` or
   * `rollup-global-variables-plugin-settings-configuration-for-node`, depending on the target
   * type, and then `rollup-global-variables-plugin-settings-configuration`. The event receives
   * the settings, the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params   A dictionary generated by the top service building
   *                                             the configuration and that includes things like the
   *                                             target information, its entry settings, output
   *                                             paths, etc.
   * @param {Array}                     external The list of modules that will be handled as
   *                                             external dependencies.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getGlobalVariablesSettings(params, external) {
    // Define the settings dictionary.
    const settings = {};
    // Loop all the external modules.
    external.forEach((name) =&gt; {
      // Format the module name into a variable.
      const globalName = name
      .replace(/\//g, &apos;-&apos;)
      .replace(/-(\w)/g, (match, letter) =&gt; letter.toUpperCase());
      // Set it on the dictionary using the module name as key.
      settings[name] = globalName;
    });

    const eventName = params.target.is.node ?
      &apos;rollup-global-variables-settings-configuration-for-node&apos; :
      &apos;rollup-global-variables-settings-configuration-for-browser&apos;;

    // return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-global-variables-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `resolve` plugin.
   * This method uses the reducer event `rollup-resolve-plugin-settings-configuration-for-browser`
   * or `rollup-resolve-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-resolve-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getResolveSettings(params) {
    const settings = {
      // Add just for basic JS files and JSON.
      extensions: [&apos;.js&apos;, &apos;.json&apos;, &apos;.jsx&apos;],
    };

    const eventName = params.target.is.node ?
      &apos;rollup-resolve-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-resolve-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-resolve-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `replace` plugin.
   * This method uses the reducer event `rollup-replace-plugin-settings-configuration-for-browser`
   * or `rollup-replace-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-replace-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getReplaceSettings(params) {
    // Add the target definitions as the settings.
    const settings = Object.assign({}, params.definitions);

    const eventName = params.target.is.node ?
      &apos;rollup-replace-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-replace-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-replace-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `babel` plugin.
   * This method uses the reducer event `rollup-babel-plugin-settings-configuration-for-browser`
   * or `rollup-babel-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-babel-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getBabelSettings(params) {
    const { target, targetRules } = params;
    // Get the rule for JS files.
    const jsRule = targetRules.js.getRule();
    // Get the target Babel configuration.
    const baseConfiguration = this.babelConfiguration.getConfigForTarget(target);
    // Disable the `modules` feature for the `env` preset.
    const configuration = this.babelHelper.disableEnvPresetModules(baseConfiguration);
    // Define the plugin settings.
    const settings = Object.assign(
      {},
      configuration,
      {
        // The plugin doesn&apos;t support RegExp, so it will use the glob patterns.
        include: [...jsRule.files.glob.include],
        exclude: [...jsRule.files.glob.exclude],
      }
    );

    const eventName = target.is.node ?
      &apos;rollup-babel-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-babel-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-babel-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `commonjs` plugin.
   * This method uses the reducer event `rollup-commonjs-plugin-settings-configuration-for-browser`
   * or `rollup-commonjs-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-commonjs-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getCommonJSSettings(params) {
    // Define the plugin settings.
    const settings = {
      include: [
        new RegExp(this.pathUtils.join(&apos;config&apos;), &apos;i&apos;),
        /node_modules\//i,
      ],
    };

    const eventName = params.target.is.node ?
      &apos;rollup-commonjs-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-commonjs-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-commonjs-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `sass` plugin.
   * This method uses the reducer event `rollup-sass-plugin-settings-configuration-for-browser`
   * or `rollup-sass-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-sass-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getSASSSettings(params) {
    const { target, paths, targetRules } = params;
    // Get the rule for SCSS files.
    const scssRule = targetRules.scss.getRule();

    // Define the plugin settings.
    const settings = {
      include: [...scssRule.files.include],
      exclude: [...scssRule.files.exclude],
      options: {
        sourceMapEmbed: true,
        outputStyle: &apos;compressed&apos;,
        includePaths: [&apos;node_modules&apos;],
      },
      processor: this._getStylesProcessor(target.css.modules),
      failOnError: true,
    };

    // If the CSS should be injected, turn on the flag.
    if (target.css.inject) {
      settings.insert = true;
    } else if (target.is.browser) {
      // If the CSS shouldn&apos;t be injected and the target is for browser, define a bundle path.
      settings.output = `${target.paths.build}/${paths.css}`;
    } else {
      // Otherwise, it means that is a Node target, so just return the code.
      settings.output = false;
    }

    const eventName = target.is.node ?
      &apos;rollup-sass-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-sass-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-sass-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `css` plugin.
   * This method uses the reducer event `rollup-css-plugin-settings-configuration-for-browser`
   * or `rollup-css-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-css-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @param {Function}                  stats  A function to send to the plugins that support
   *                                           logging stats entries.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getCSSSettings(params, stats) {
    const { target, paths, targetRules } = params;
    // Get the rule for SCSS files.
    const cssRule = targetRules.css.getRule();
    // Define the plugin settings.
    const settings = {
      include: [...cssRule.files.include],
      exclude: [...cssRule.files.exclude],
      processor: this._getStylesProcessor(false, { map: true }),
      stats,
    };

    // If the CSS should be injected, turn on the flag.
    if (target.css.inject) {
      settings.insert = true;
    } else if (target.is.browser) {
      // If the CSS shouldn&apos;t be injected and the target is for browser, define a bundle path.
      settings.output = `${target.paths.build}/${paths.css}`;
    } else {
      // Otherwise, it means that is a Node target, so just return the code.
      settings.output = false;
    }

    const eventName = target.is.node ?
      &apos;rollup-css-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-css-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-css-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `stylesheetAssets` plugin, which is a projext&apos;s plugin that takes
   * care of copying and fixing the paths for the files linked on stylesheets.
   * This method uses the reducer event
   * `rollup-stylesheet-assets-plugin-settings-configuration-for-browser` or
   * `rollup-stylesheet-assets-plugin-settings-configuration-for-node`, depending on the target
   * type, and then `rollup-stylesheet-assets-plugin-settings-configuration`. The event receives
   * the settings, the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @param {Function}                  stats  A function to send to the plugins that support
   *                                           logging stats entries.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getStyleheetAssetsSettings(params, stats) {
    const {
      target,
      paths,
      output,
    } = params;
    // Get the rules for common assets.
    const assetsRules = this._getAssetsRules(params);
    /**
     * Define the file the plugin will parse. If the target injects the CSS or is a Node target,
     * use the main JS file, otherwise, the path for bundling CSS.
     */
    const stylesheet = target.css.inject || target.is.node ?
      output.file :
      `${target.paths.build}/${paths.css}`;

    // Define the plugin settings.
    const settings = {
      stylesheet,
      stats,
      urls: [
        assetsRules.fonts,
        assetsRules.images,
      ],
    };

    const eventName = target.is.node ?
      &apos;rollup-stylesheet-assets-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-stylesheet-assets-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-stylesheet-assets-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `stylesheetModulesFixer` plugin, which is a projext&apos;s plugin that
   * parses modules for CSS (stylsheet that Rollup transforms into ES modules) and if they inject
   * the CSS on the browser or they code was moved to a separate bundle, replace their default
   * exports for the named export for CSS Modules locals.
   * This method uses the reducer event
   * `rollup-stylesheet-modules-fixer-plugin-settings-configuration-for-browser` or
   * `rollup-stylesheet-modules-fixer-plugin-settings-configuration-for-node`, depending on the
   * target type, and then `rollup-stylesheet-modules-fixer-plugin-settings-configuration`. The
   * event receives the settings, the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getStylesheetModulesFixerSettings(params) {
    const { target, targetRules } = params;
    // Get both SCSS and CSS rules.
    const scssRule = targetRules.scss.getRule();
    const cssRule = targetRules.css.getRule();
    // Define the plugin settings.
    const settings = {
      include: [
        ...scssRule.files.include,
        ...cssRule.files.include,
      ],
      exclude: [
        ...scssRule.files.exclude,
        ...cssRule.files.exclude,
      ],
    };

    const eventName = target.is.node ?
      &apos;rollup-stylesheet-modules-fixer-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-stylesheet-modules-fixer-plugin-settings-configuration-for-browser&apos;;

    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-stylesheet-modules-fixer-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `stylesheetAssets` helper plugin, which is a projext&apos;s plugin
   * that wraps the default exports of stylesheets Rollup transforms into ES modules so
   * the `stylesheetAssets` plugin can find them and parse them.
   * This method uses the reducer event
   * `rollup-stylesheet-assets-helper-plugin-settings-configuration`, it receives the settings,
   * the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getStyleheetAssetsHelperSettings(params) {
    const { targetRules } = params;
    // Get both SCSS and CSS rules.
    const scssRule = targetRules.scss.getRule();
    const cssRule = targetRules.css.getRule();
    // Define the plugin settings.
    const settings = {
      include: [
        ...scssRule.files.include,
        ...cssRule.files.include,
      ],
      exclude: [
        ...scssRule.files.exclude,
        ...cssRule.files.exclude,
      ],
    };
    // Return the reduced configuration.
    return this.events.reduce(
      &apos;rollup-stylesheet-assets-helper-plugin-settings-configuration&apos;,
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `html` plugin.
   * This method uses the reducer event `rollup-html-plugin-settings-configuration-for-browser`
   * or `rollup-html-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-html-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getHTMLSettings(params) {
    /**
     * There are no settings, but because the plugin is used, the method reduces the empty
     * configuration so other plugins/services can update it if needed.
     */
    const settings = {};

    const eventName = params.target.is.node ?
      &apos;rollup-html-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-html-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-html-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `json` plugin.
   * This method uses the reducer event `rollup-json-plugin-settings-configuration-for-browser`
   * or `rollup-json-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-json-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getJSONSettings(params) {
    /**
     * There are no settings, but because the plugin is used, the method reduces the empty
     * configuration so other plugins/services can update it if needed.
     */
    const settings = {};

    const eventName = params.target.is.node ?
      &apos;rollup-json-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-json-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-json-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `stylesheetAssets` plugin, which is a projext&apos;s plugin that
   * transform files matching a filter by copying its contents into a new file on the output
   * directory and replacing its default export with a URL for them.
   * This method uses the reducer event `rollup-urls-plugin-settings-configuration-for-browser` or
   * `rollup-urls-plugin-settings-configuration-for-node`, depending on the target type, and then
   * `rollup-urls-plugin-settings-configuration`. The event receives the settings, the `params`
   * and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @param {Function}                  stats  A function to send to the plugins that support
   *                                           logging stats entries.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getURLsSettings(params, stats) {
    const { target } = params;
    // Get the rules for common assets.
    const assetsRules = this._getAssetsRules(params);
    // Define the plugin settings.
    const settings = {
      urls: [
        assetsRules.fonts,
        assetsRules.images,
        assetsRules.favicon,
      ],
      stats,
    };

    const eventName = target.is.node ?
      &apos;rollup-urls-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-urls-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-urls-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `template` plugin, which is a projext&apos;s plugin that generates
   * and HTML file and injects a list of JS and CSS files.
   * This method uses the reducer event `rollup-html-plugin-settings-configuration-for-browser` or
   * `rollup-html-plugin-settings-configuration-for-node`, depending on the target type, and then
   * `rollup-html-plugin-settings-configuration`. The event receives the settings, the `params`
   * and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @param {Function}                  stats  A function to send to the plugins that support
   *                                           logging stats entries.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getTemplateSettings(params, stats) {
    const { target, paths } = params;
    // Get the rules for common assets.
    const assetsRules = this._getAssetsRules(params);
    // Define the plugin settings.
    const settings = {
      template: this.targetsHTML.getFilepath(target),
      output: `${target.paths.build}/${target.html.filename}`,
      stylesheets: target.css.inject ?
        [] :
        [`/${paths.css}`],
      scripts: [`/${paths.js}`],
      urls: [
        assetsRules.images,
        assetsRules.favicon,
      ],
      stats,
    };
    // Return the reduced configuration.
    return this.events.reduce(
      &apos;rollup-template-plugin-settings-configuration&apos;,
      settings,
      params
    );
  }
  /**
   * Defines the settings for the Rollup watcher.
   * This method uses the reducer event `rollup-watch-plugin-settings-configuration-for-browser` or
   * `rollup-watch-plugin-settings-configuration-for-node`, depending on the target type, and then
   * `rollup-watch-plugin-settings-configuration`. The event receives the settings, the `params`
   * and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getWatchSettings(params) {
    // Define the plugin settings.
    const settings = {
      clearScreen: false,
    };

    const eventName = params.target.is.node ?
      &apos;rollup-watch-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-watch-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-watch-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `devServer` plugin, which is a projext&apos;s plugin for running web
   * apps while on development.
   * This method uses the reducer event `rollup-dev-server-plugin-settings-configuration`, it
   * receives the settings, the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getDevServerSettings(params) {
    const { target } = params;
    const { devServer } = target;
    // Define the basic settings.
    const settings = {
      host: devServer.host,
      port: devServer.port,
      contentBase: target.paths.build,
      historyApiFallback: !!devServer.historyApiFallback,
      https: null,
      logger: this.appLogger,
    };
    // Loop the SSL settings and load the file for those which have a valid file path.
    const sslSettings = {};
    /**
     * The idea of this flag is that if none of the SSL settings has value, the `ssl` setting
     * won&apos;t be added.
     */
    let atLeastOneSSLSetting = false;
    [
      &apos;key&apos;,
      &apos;cert&apos;,
      &apos;ca&apos;,
    ].forEach((sslSettingName) =&gt; {
      const file = devServer.ssl[sslSettingName];
      // Make sure the setting value is a string.
      if (typeof file === &apos;string&apos;) {
        const filepath = this.pathUtils.join(file);
        // Verify that the file exists.
        if (fs.pathExistsSync(filepath)) {
          // Turn on the flag.
          atLeastOneSSLSetting = true;
          // Set the value of the setting with the contents of the file.
          sslSettings[sslSettingName] = fs.readFileSync(filepath, &apos;utf-8&apos;);
        }
      }
    });
    /**
     * If there&apos;s at least one setting implemented, set it for the plugin to use, otherwise keep
     * it as `undefined`.
     */
    if (atLeastOneSSLSetting) {
      settings.https = sslSettings;
    }
    // Return the reduced configuration.
    return this.events.reduce(
      &apos;rollup-dev-server-plugin-settings-configuration&apos;,
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `ugify` plugin.
   * This method uses the reducer event `rollup-uglify-plugin-settings-configuration-for-browser`
   * or `rollup-uglify-plugin-settings-configuration-for-node`, depending on the target type, and
   * then `rollup-uglify-plugin-settings-configuration`. The event receives the settings, the
   * `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getUglifySettings(params) {
    /**
     * There are no settings, but because the plugin is used, the method reduces the empty
     * configuration so other plugins/services can update it if needed.
     */
    const settings = {};

    const eventName = params.target.is.node ?
      &apos;rollup-uglify-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-uglify-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-uglify-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `compression` plugin, which is a projext&apos;s plugin that takes care
   * of compressing the generated assets using Gzip.
   * This method uses the reducer event
   * `rollup-compression-plugin-settings-configuration-for-browser` or
   * `rollup-compression-plugin-settings-configuration-for-node`, depending on the target type,
   * and then `rollup-compression-plugin-settings-configuration`. The event receives the settings,
   * the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @param {Function}                  stats  A function to send to the plugins that support
   *                                           logging stats entries.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getCompressionSettings(params, stats) {
    const { target } = params;
    // Get the rule to find ALL generated assets.
    const rule = this._getARuleForAllTheAssets(params);
    // Define the plugin settings.
    const settings = {
      folder: target.paths.build,
      include: rule.include,
      exclude: rule.exclude,
      stats,
    };

    const eventName = target.is.node ?
      &apos;rollup-compression-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-compression-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-compression-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `stats` plugin `log` _&quot;sub plugin&quot;_. The `stats` plugin is a
   * projext plugin that allows other plugins and services to add stats entries to eventually
   * show a report table when the bundle process finishes. The `log` _&quot;sub plugin&quot;_ is the method
   * that you would add to the Rollup plugins queue and that it actually logs the report table.
   * This method uses the reducer event
   * `rollup-stats-plugin-settings-configuration-for-browser` or
   * `rollup-stats-plugin-settings-configuration-for-node`, depending on the target type,
   * and then `rollup-stats-plugin-settings-configuration`. The event receives the settings,
   * the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getStatsLogSettings(params) {
    const { target, paths, buildType } = params;
    // As the first extra entry, add the bundle generated by Rollup.
    const extraEntries = [
      {
        plugin: &apos;rollup&apos;,
        filepath: `${target.paths.build}/${paths.js}`,
      },
    ];
    // If the target implements source maps, add the entry for the source map.
    if (target.sourceMap &amp;&amp; target.sourceMap[buildType]) {
      extraEntries.push({
        plugin: &apos;rollup&apos;,
        filepath: `${target.paths.build}/${paths.js}.map`,
      });
    }
    /**
     * If the target is for browser and is not injecting the styles, assume the `sass` plugin
     * has generated a bundle, so add and entry for it.
     * @todo This should be on the `processor` to be able to know if it was the `sass` or `css`
     *       plugin.
     */
    if (target.is.browser &amp;&amp; !target.css.inject) {
      extraEntries.push({
        plugin: &apos;rollup-plugin-sass&apos;,
        filepath: `${target.paths.build}/${paths.css}`,
      });
    }
    // Define the plugin settings.
    const settings = {
      extraEntries,
    };

    const eventName = target.is.node ?
      &apos;rollup-stats-plugin-settings-configuration-for-node&apos; :
      &apos;rollup-stats-plugin-settings-configuration-for-browser&apos;;
    // Return the reduced configuration.
    return this.events.reduce(
      [eventName, &apos;rollup-stats-plugin-settings-configuration&apos;],
      settings,
      params
    );
  }
  /**
   * Defines the settings for the `nodeRunner` plugin, which is a projext&apos;s plugin for running Node
   * apps while on development.
   * This method uses the reducer event `rollup-node-runner-plugin-settings-configuration`, it
   * receives the settings, the `params` and expects new settings on return.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getNodeRunnerSettings(params) {
    const { output } = params;
    // Define the plugin settings.
    const settings = {
      file: output.file,
      logger: this.appLogger,
    };
    // Return the reduced configuration.
    return this.events.reduce(
      &apos;rollup-node-runner-plugin-settings-configuration&apos;,
      settings,
      params
    );
  }
  /**
   * This a helper method that generates a dictionary of {@link ProjextRollupPluginURL}
   * definitions for common assets (fonts, images and the favicon). These definitions can be used
   * on different plugin settings.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getAssetsRules(params) {
    const { target, targetRules, paths } = params;
    const commonFontsRule = targetRules.fonts.common.getRule();
    const svgFontsRule = targetRules.fonts.svg.getRule();
    const imagesRule = targetRules.images.getRule();
    const faviconRule = targetRules.favicon.getRule();

    return {
      fonts: {
        include: [
          ...commonFontsRule.files.include,
          ...svgFontsRule.files.include,
        ],
        exclude: [
          ...commonFontsRule.files.exclude,
          ...svgFontsRule.files.exclude,
        ],
        output: `${target.paths.build}/${paths.fonts}`,
        url: `/${paths.fonts}`,
      },
      images: {
        include: [...imagesRule.files.include],
        exclude: [...imagesRule.files.exclude],
        output: `${target.paths.build}/${paths.images}`,
        url: `/${paths.images}`,
      },
      favicon: {
        include: [...faviconRule.files.include],
        exclude: [...faviconRule.files.exclude],
        output: `${target.paths.build}/[name].[ext]`,
        url: &apos;/[name].[ext]&apos;,
      },
    };
  }
  /**
   * This a helper method that generates a set of `include` and `exclude` rules to match all
   * possible generated assets on the output directory.
   * @param {RollupConfigurationParams} params A dictionary generated by the top service building
   *                                           the configuration and that includes things like the
   *                                           target information, its entry settings, output
   *                                           paths, etc.
   * @return {Object}
   * @access protected
   * @ignore
   */
  _getARuleForAllTheAssets(params) {
    const { target } = params;
    const extensions = [
      &apos;js&apos;,
      &apos;jsx&apos;,
      &apos;css&apos;,
      &apos;html&apos;,
      &apos;map&apos;,
      &apos;woff&apos;,
      &apos;woff2&apos;,
      &apos;ttf&apos;,
      &apos;eot&apos;,
      &apos;jpg&apos;,
      &apos;jpeg&apos;,
      &apos;png&apos;,
      &apos;gif&apos;,
      &apos;svg&apos;,
      &apos;ico&apos;,
    ];
    const extensionsStr = extensions.join(&apos;|&apos;);
    const extensionsRegex = `\\.(?:${extensionsStr})$`;
    return {
      include: [new RegExp(`${target.paths.build}/.*?${extensionsRegex}`, &apos;i&apos;)],
      exclude: [],
    };
  }
  /**
   * Helper method for the stylsheet processor. It searches and retrieves a source map comment
   * from a given CSS code.
   * @param {string} code The CSS code where the source map will be retrieved from.
   * @return {?string} If the source map it&apos;s found, it will return it, otherwise, it will return
   *                   `null`.
   * @access protected
   * @ignore
   */
  _getSourceMap(code) {
    const regex = /(\/\*# sourceMappingURL=.*? \*\/)/i;
    const match = regex.exec(code);
    let result = null;
    if (match) {
      [result] = match;
    }

    return result;
  }
  /**
   * This is a custom stylesheet processor for the `sass` and `css` plugin. It makes sure all
   * generated styles have a source map that plugins like `stylesheetAssets` can use. It also
   * takes care of implementing CSS modules if the target has them enabled.
   * @param {boolean} modules                      Whether or not CSS modules are enabled.
   * @param {Object}  [processorOptions={}]        Custom options for the processor.
   * @param {boolean} [processorOptions.map=false] Whether or not a source map should be generated
   *                                               for the stylesheet. When generated with the
   *                                               `sass` plugin, the source map already comes
   *                                               with the code; but when generated with the
   *                                               `css` plugin, it should be added.
   * @return {function}
   * @access protected
   * @ignore
   */
  _getStylesProcessor(modules, processorOptions = {}) {
    // Merge the default options with the received custom options.
    const options = Object.assign(
      {},
      {
        map: false,
        /**
         * If the file already has a source map, this value will be filled with the path to
         * the file being processed, as required by `postcss`.
         */
        from: undefined,
      },
      processorOptions
    );
    // Return the processor function.
    return (css, filepath) =&gt; {
      let map;
      /**
       * If the stylesheet needs a source map, complete the `from` option; otherwise, read it from
       * the code.
       * The reason the source map is being extracted before processing the stylesheet is because
       * `postcss` may update it and the reference for the original sources may get lost.
       */
      if (options.map) {
        options.from = filepath;
      } else {
        map = this._getSourceMap(css) || &apos;&apos;;
      }
      // Define the variable that will be used to store the CSS modules locals if enabled.
      let locals;
      // Define the list of plugins for `postcss`.
      const plugins = [];
      /**
       * If CSS modules are enabled for the target, push the plugin with a callback to obtain the
       * locals names.
       */
      if (modules) {
        plugins.push(postcssModules({
          getJSON: (filename, json) =&gt; {
            locals = json;
          },
        }));
      }

      return postcss(plugins)
      // Process the stylesheet code.
      .process(css, options)
      .then((processed) =&gt; {
        // Add the source map if needed.
        const cssCode = options.map ?
          `${processed.css}\n` :
          `${processed.css}\n\n${map}\n`;
        // Define the return object.
        let result;
        /**
         * If CSS modules are enabled for the target, return a dictionary with the code and the
         * locals, otherwise just return the code.
         */
        if (modules) {
          result = {
            css: cssCode,
            locals,
          };
        } else {
          result = cssCode;
        }

        return result;
      });
    };
  }
}
/**
 * The service provider that once registered on the app container will set an instance of
 * `RollupPluginSettingsConfiguration` as the `rollupPluginSettingsConfiguration` service.
 * @example
 * // Register it on the container
 * container.register(rollupPluginSettingsConfiguration);
 * // Getting access to the service instance
 * const rollupPluginSettingsConfiguration = container.get(&apos;rollupPluginSettingsConfiguration&apos;);
 * @type {Provider}
 */
const rollupPluginSettingsConfiguration = provider((app) =&gt; {
  app.set(&apos;rollupPluginSettingsConfiguration&apos;, () =&gt; new RollupPluginSettingsConfiguration(
    app.get(&apos;appLogger&apos;),
    app.get(&apos;babelConfiguration&apos;),
    app.get(&apos;babelHelper&apos;),
    app.get(&apos;events&apos;),
    app.get(&apos;packageInfo&apos;),
    app.get(&apos;pathUtils&apos;),
    app.get(&apos;rollupPluginInfo&apos;),
    app.get(&apos;targetsHTML&apos;)
  ));
});

module.exports = {
  RollupPluginSettingsConfiguration,
  rollupPluginSettingsConfiguration,
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
